# Git

​	git是一个开源的**分布式版本控制系统**。存在远程仓库，本地仓库。除了默认隐藏的.git外的所有目录都是**工作目录**。

## 0.0	可能会用到的Linux指令

​	ls/ll 查看当前目录

​	cat 查看文件内容

​	touch 创建文件

​	vi vi编辑器（使用vi编辑器是为了方便展示效果。使用记事本、editPlus、notPad++等其它编辑器亦可）

## 1.0	基础操作指令

​	Git工作目录下对于文件的**修改**(增加、删除、更新)会存在几个状态，这些**修改**的状态会随着我们执行Git的命令而发生变化。

​	初始化git仓库:git init

![repositoryindexworkspace](https://mytyporapicute.oss-cn-guangzhou.aliyuncs.com/repositoryindexworkspace.png)

​	简记:workspace -> index: git add

​	index -> repository: git commit

### 1.01	查看修改的状态(status)

​	作用：查看的修改的状态（暂存区、工作区）

​	命令形式：git status

### 1.02	添加工作区到暂存区(add)

​	作用：添加工作区一个或多个文件的修改到暂存区

​	命令形式：git add 单个文件名|通配符

​	将所有修改加入暂存区：git add .

### 1.03	提交暂存区到本地仓库(commit)

​		作用：提交暂存区内容到本地仓库的当前分支

​		命令形式：git commit -m '注释内容'

### 1.04	查看提交日志(log)

​	此前配置的别名git**-**log就包含了这些参数，所以后续可以直接使用指令git**-**log。

​	作用:查看提交记录

​	命令形式：git log [option]

​		options:

​			--all 显示所有分支

​			--pretty=oneline 将提交信息显示为一行

​			--abbrev-commit 使得输出的commitId更简短

​			--graph 以图的形式显示

### 1.05	版本回退

​	作用：版本切换

​	命令形式：git reset --hard commitID

​	commitID 可以使用 git-log 或 git log 指令查看

​	作用：查看已经删除的记录:

​	命令形式：git reflog

​	这个指令可以看到已经删除的提交记录。

### 1.06	.gitignore——添加文件至忽略列表

​	对于无需纳入Git 的管理，也不希望出现在未跟踪文件列表的文件，我们可以在工作目录中创建一个名为.gitignore的文件(名称固定),在其中列出要忽略的文件模式。

```git
# no .a files
*.a

# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in the build/ directory
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory
doc/**/*.pdf

```

​	在 文件名.gitignore 文件中，每一行的忽略规则的语法如下：

> 空格不匹配任意文件，可作为分隔符，可用反斜杠转义
> 开头的文件标识注释，可以使用反斜杠进行转义
> ! 开头的模式标识否定，该文件将会再次被包含，如果排除了该文件的父级目录，则使用 ! 也不会再次被包含。可以使用反斜杠进行转义
> / 结束的模式只匹配文件夹以及在该文件夹路径下的内容，但是不匹配该文件
> / 开始的模式匹配项目跟目录
> 如果一个模式不包含斜杠，则它匹配相对于当前 .gitignore 文件路径的内容，如果该模式不在 .gitignore 文件中，则相对于项目根目录
> ** 匹配多级目录，可在开始，中间，结束
> ? 通用匹配单个字符
> \* 通用匹配零个或多个字符
> [] 通用匹配单个字符列表

## 1.1	分支

​	几乎所有的版本控制系统都以某种形式支持分支。 使用分支意味着你可以把你的工作从开发主线上分离开来，以便进行重大的Bug修改、开发新的功能，避免影响开发主线。

### 1.11	查看(创建)本地分支

​	命令形式:git branch (分支名)

​	其查看功能一定程度上可以被前文设置的命令别名git-log代替。

### 1.12	切换分支

#### 1.122	checkout

​	命令形式:git checkout 分支名

​	功能:切换到一个存在的分支。

​	命令形式: git checkout -b 分支名

​	功能: 创建一个分支并切换。

#### 1.124	switch(新版本Git)

​	命令形式:git switch (-c) 分支名

​	功能:切换到一个已存在(新的)分支。

### 1.13	合并分支

​	命令形式:git merge 分支名称

​	功能:将一个分支的提交合并到另一个目标分支。必须先切换到目标分支。

#### 1.132	合并的快进模式（Fast-forward)

​	在某些情况下使用git merge命令后会看到Fast-forward信息,这说明这次合并是快进模式,即<u>直接把 **目标分支** 指向 **merge分支** 的当前提交</u>，因此此次合并速度会非常快。

### 1.14	删除分支

​	命令形式:git branch -d b1

​	功能:做各种检查并通过后，删除分支。

​	命令形式:git branch -D b1

​	功能:不做任何检查，强制删除。

​	注意，不能删除当前分支，只能删除其他分支。

### 1.15	解决冲突

​	当两个分支上对文件的修改可能会存在冲突，例如同时修改了同一个文件的同一行，这时就需要手动解决冲突，解决冲突步骤如下：

​		1、处理文件中冲突的地方(可以直接在文件操作)；

​		2、将解决完冲突的文件加入暂存区(add)；

​		3、提交到仓库(commit)；

### 1.16	分支在开发中

​	在开发中,分支有若干使用原则和相对固定的流程。master生产分支、develop开发分支、feature/xxxx分支、hotfix/xxxx分支、test代码测试分支、pre预上线分支等。

## 1.2	Git远程仓库

​	Git中存在本地仓库和远程仓库两种类型的仓库，我们可以通过一些网上的代码托管服务平台来搭建Git远程仓库，其中常用的有:Github、码云、GitLab、CODING等。

### 1.21	配置SSH公钥

​	本地生成公钥并在相应平台上设置后，便可以通过SSH操作远程仓库。此为操作远程仓库的方法之一。

### 1.22	操作远程仓库

#### 1.221	添加远程仓库(由下至上)

​	命令形式:git remote add [远端名称] [仓库路径]

​	功能: 初始化本地库，然后与已创建的远程库进行对接，即将本地已有的内容上传的(空白)远程库中并进行对接。

​	远端名称：默认是origin，取决于远端服务器设置。一般填origin即可。

​	仓库路径：从远端服务器获取此URL填入，有HTTPS、SSH等多种形式。

#### 1.222	查看远程仓库

​	命令形式:git remote

​	功能：显示当前本地库连接的远程仓库。

#### 1.223	推送到远程仓库(常用)

​	命令形式:git push [-f] [--set-upstream] [远端名称] [本地分支名(:远端分支名) ]

​	功能:将本地分支推送到远程仓库(的对应分支)。

​	参数功能:

​		①如果远程分支名和本地分支名称相同，则可以只写本地分支：

​			git push origin master

​		②-f 表示强制覆盖，无视警告

​		③--set-upstream 表示推送到远端的同时并且建立起和远端分支的关联关系:

​			git push --set-upstream origin master

​		如果当前分支已经和远端分支关联，则可以省略分支名和远端名直接使用git push——将master分支推送到已关联的远端分支。 

#### 1.224	查看本地分支与远程分支的关联关系

​	命令形式:git branch -vv

​	功能:如题

#### 1.225	从远程仓库克隆到本地(由上至下)

​	命令形式:git clone [仓库路径] (本地目录)

​	功能: 将已经一个已经存在的远程仓库克隆到本地目录下(连带着远程仓库中的文件一起)。若本地目录留空，则会克隆到当前目录。

#### 1.226	从远程仓库中抓取

​	命令形式:git fetch [远端名称] [远端分支名称]

​	功能:将远程仓库里的更新都抓取到本地，但不会进行合并。如果上述两个参数都留空，则会抓取远程仓库的所有分支。

#### 1.227	从远程仓库中拉取

​	命令形式:git pull [远端名称] [远端分支名称]

​	功能:将远端仓库的修改拉到本地并自动进行合并，等同于fetch+merge。如果上述两个参数都留空，则会抓取所有并更新当前分支。

#### 1.228	关于合并冲突

​	远程分支也是分支，所以合并时冲突的解决方式也和解决本地分支冲突的方式基本相同:

​		0、先拉取远程仓库的提交；

​		1、处理文件中冲突的地方(可以直接在文件操作)；

​		2、将解决完冲突的文件加入暂存区(add)；

​		3、提交到仓库(commit)；

### 1.3	几个要点

​	① 切换分支前要先提交本地的修改。

​	② 代码要及时提交(保存)，提交过了就不会丢。
